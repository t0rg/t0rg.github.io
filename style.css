/* STYLES CSS COMPLETS (Base + Ajouts pour le feedback dynamique) */
.bg-game { background: linear-gradient(180deg,#0b1220 0%, #071018 100%); }
.glass { background: rgba(255,255,255,0.03); backdrop-filter: blur(6px); border: 1px solid rgba(255,255,255,0.04); }
/* MODIF CSS: Ajout de 'border-color' pour le feedback vert/rouge */
.card-container { transition: transform .35s cubic-bezier(.22,.9,.27,1), opacity .35s, border-color .3s; will-change: transform, opacity, border-color; touch-action: none; cursor: grab; }
.slide-out-left { transform: translateX(-150vw) rotate(-22deg) !important; opacity: 0; }
.slide-out-right { transform: translateX(150vw) rotate(22deg) !important; opacity: 0; }

/* CORRECTIF MAJEUR: 'position: absolute' est supprimé pour permettre un défilement normal.
  Les écrans sont maintenant des blocs flex centrés.
*/
.screen { 
  /* position:absolute; inset:0; */ /* SUPPRIMÉ */
  display:flex; 
  align-items:center; 
  justify-content:center;
  width: 100%;
  min-height: calc(100vh - 12rem); /* Hauteur minimale pour centrer sur les écrans courts */
  padding: 1.5rem; /* Ajout d'un padding pour aérer */
}
.screen.items-start { align-items: flex-start; justify-content: center; }
.hidden-screen{ display:none; }

.circular-gauge { width: 200px; height: 200px; position: relative; }
.circular-gauge svg { transform: rotate(-90deg); }
.gauge-bg { fill: none; stroke: rgba(255,255,255,0.1); stroke-width: 20; }
.gauge-progress { fill: none; stroke: url(#gaugeGradient); stroke-width: 20; stroke-linecap: round; transition: stroke-dashoffset 1.5s cubic-bezier(0.4, 0, 0.2, 1); }
.gauge-center { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; }
.deck-card { transition: all 0.3s ease; cursor: pointer; }
.deck-card:hover { transform: translateY(-8px); box-shadow: 0 20px 40px rgba(0,0,0,0.4); }
.filter-btn { transition: all 0.2s ease; }
.filter-btn.active { background: rgba(99, 102, 241, 0.5); border-color: rgb(99, 102, 241); }
.pop{ animation: popInUp .36s cubic-bezier(.2,.9,.3,1) both; }
@keyframes popInUp{ from{ transform: translateY(18px) scale(.99); opacity:0 } to{ transform: translateY(0) scale(1); opacity:1 } }
input[type="text"].player-input{ background:#f3f4f6; color:#0f172a; }
.msg { transition: opacity .25s ease; }
.result-message { animation: fadeInScale 0.6s cubic-bezier(0.2, 0.9, 0.3, 1) 0.3s both; }
@keyframes fadeInScale { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
/* AJOUTS CSS POUR LE FEEDBACK DYNAMIQUE */
.overlay-gradient { 
    position: absolute; 
    top: 0; 
    bottom: 0; 
    width: 50%; 
    opacity: 0; 
    pointer-events: none;
    transition: opacity .1s linear;
}
#overlay-left { left: 0; background: linear-gradient(90deg, rgba(168,85,247, 0.1) 0%, rgba(168,85,247, 0) 100%); }
#overlay-right { right: 0; background: linear-gradient(-90deg, rgba(236,72,153, 0.1) 0%, rgba(236,72,153, 0) 100%); }
.swipe-indicator {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    font-size: 1.5rem;
    font-weight: bold;
    padding: 0.5rem 1rem;
    border-radius: 9999px;
    z-index: 50;
    opacity: 0;
    transition: opacity .1s linear, transform .1s linear;
}
#indicator-left { left: -1rem; color: #c084fc; background: rgba(168,85,247, 0.2); }
#indicator-right { right: -1rem; color: #f472b6; background: rgba(236,72,153, 0.2); }

/* NOUVEAU STYLE POUR LE RÉCAPITULATIF */
.error-card-recap { transition: transform 0.3s ease; cursor: pointer; }
.error-card-recap:hover { transform: translateY(-3px); }

/* STYLE DE LA MODALE ET MODALE MOT DE PASSE */
.base-modal {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.95);
    display: none; 
    z-index: 9999;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(5px);
    opacity: 0;
    transition: opacity 0.3s ease;
}
.base-modal.active {
    display: flex;
    opacity: 1;
}
#modal-content, #password-modal-content, #edit-modal-content, #deck-modal-content, #alert-modal-content {
    max-width: 90%;
    padding: 1.5rem;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 1.5rem;
    box-shadow: 0 0 40px rgba(0, 0, 0, 0.6);
    max-height: 90%;
    box-sizing: border-box;
    /* CORRECTION: Ajout de flex pour le scrolling interne */
    display: flex;
    flex-direction: column;
}
#modal-image {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    border-radius: 1rem;
}
.close-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    font-size: 2rem;
    cursor: pointer;
    color: white;
    text-shadow: 0 0 10px black;
    transition: color 0.2s;
}
.close-btn:hover {
    color: #ec4899;
}
#password-input {
    letter-spacing: 0.5rem;
    text-align: center;
    font-size: 1.5rem;
}

/* STYLES DE BOUTONS FLÈCHES */
.arrow-btn-container {
  margin-top: 1.5rem;
  width: 100%;
  max-width: 320px;
}
.arrow-btn {
    width: 70px;
    height: 48px;
    border-radius: 9999px; /* Pill shape */
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    font-weight: bold;
    transition: background-color 0.2s, transform 0.2s;
    cursor: pointer;
    border: 2px solid;
}
.arrow-btn:hover {
    transform: scale(1.05);
}
#btn-arrow-left {
    background-color: rgba(168, 85, 247, 0.2);
    border-color: #a855f7;
    color: #a855f7;
}
#btn-arrow-right {
    background-color: rgba(236, 72, 153, 0.2);
    border-color: #ec4899;
    color: #ec4899;
}
.arrow-svg {
    width: 24px; /* Taille du SVG */
    height: 24px;
    fill: currentColor; /* Le SVG prend la couleur du parent */
    stroke-width: 2;
}
/* STYLE POUR LE PETIT BOUTON SOLUCE SUR DECK SCREEN */
#btn-view-soluce-deck {
    transition: transform 0.2s ease;
}
#btn-view-soluce-deck:hover {
    transform: scale(1.05);
}

/* Style pour la galerie Soluce */
.soluce-gallery-item {
    width: 120px;
    height: 160px;
    transition: transform 0.3s ease;
    object-fit: cover;
    position: relative;
    padding: 0.5rem;
    cursor: default;
}
.soluce-gallery-item-image-container {
    position: relative;
    /* CURSEUR EN MODE CONSULTATION DÉSACTIVÉ */
    cursor: default; 
}
/* Style pour le curseur en mode édition/soluce */
/* MODIFICATION: SOLUCE LINK MODE UTILISE MAINTENANT isEditingMode UNIQUEMENT POUR LE CURSEUR */
.soluce-gallery-item.editing-mode {
    cursor: pointer !important;
    outline: 2px dashed #34d399; /* Vert pour édition */
}
.soluce-gallery-item.editing-mode:hover {
    transform: scale(1.02);
}

/* MODIFICATION: Le mode de base (lien/zoom) utilise le curseur par défaut, mais ajoute le lien/agrandir au clic */
.soluce-gallery-item {
    cursor: pointer;
}

/* Suppression de l'indication "cliquez pour agrandir" */
.edit-overlay-consult { display: none !important; }

/* Style pour les séparateurs de Deck dans Soluce */
.soluce-deck-title {
    width: 100%;
    text-align: center;
    padding: 0.5rem 0;
    margin-top: 1.5rem;
    margin-bottom: 0.5rem;
    font-size: 1.5rem;
    font-weight: bold;
    border-bottom: 2px solid rgba(255, 255, 255, 0.1); 
    /* Ajout pour l'édition de deck */
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
}
.edit-deck-btn {
    font-size: 1rem;
    cursor: pointer;
    display: none; /* Caché par défaut */
    transition: transform 0.2s;
}
.edit-deck-btn:hover {
    transform: scale(1.2);
}

/* Styles pour cacher/montrer les decks de solution */
.soluce-deck-content.hidden-soluce {
    display: none;
}
.soluce-deck-content {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1rem; /* Espace entre les vignettes */
}
/* Champs d'édition */
#edit-card-modal input, #edit-card-modal select, #deck-modal-content input, #deck-modal-content select {
    width: 100%;
    padding: 0.5rem;
    border-radius: 0.5rem;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white;
    margin-bottom: 0.75rem;
}
#edit-card-modal label, #deck-modal-content label {
    font-size: 0.875rem;
    color: #94a3b8;
    display: block;
    margin-bottom: 0.25rem;
    text-align: left;
}
/* Indicateur de lien soluce */
.soluce-link-indicator {
    position: absolute;
    top: 5px;
    right: 5px;
    color: #f472b6;
    font-size: 1.25rem;
    pointer-events: none; /* Ne doit pas bloquer le clic sur la vignette */
}
/* Nouveau style pour les vignettes de résultats */
.result-vignette {
    border-radius: 0.5rem;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    padding: 0.5rem;
    text-align: center;
    max-width: 100px;
    min-width: 80px;
    margin: 0.25rem;
}
.result-vignette.success {
    border: 2px solid #10B981; /* Vert */
}
.result-vignette.error {
    border: 2px solid #EF4444; /* Rouge */
}
.result-vignette img {
    width: 100%;
    height: 60px;
    object-fit: cover;
    border-radius: 0.25rem;
    margin-bottom: 0.25rem;
}
.result-vignette .result-status {
    font-size: 0.7rem;
    font-weight: bold;
    text-transform: uppercase;
}
.result-vignette.success .result-status {
    color: #10B981;
}
.result-vignette.error .result-status {
    color: #EF4444;
}
/* Style du bouton zoom sur la carte de jeu (SUPPRIMÉ) */
/*
#btn-zoom-card { ... }
*/

/* REFACTOR: Style pour le bouton admin dans le header (simplifié) */
/* Le positionnement absolu a été supprimé pour utiliser flexbox */

/* NOUVEAU STYLE: Bouton "Ajouter" (+) */
.add-card-btn {
    width: 120px;
    height: 160px;
    display: none; /* Caché par défaut */
    align-items: center;
    justify-content: center;
    border: 2px dashed rgba(255, 255, 255, 0.3);
    border-radius: 0.5rem;
    cursor: pointer;
    transition: all 0.2s ease;
    padding: 0.5rem; /* Correspond à .soluce-gallery-item */
}
.add-card-btn:hover {
    border-color: #34d399; /* Teal */
    background: rgba(52, 211, 153, 0.1);
}
.add-card-btn svg {
    width: 40px;
    height: 40px;
    stroke: rgba(255, 255, 255, 0.4);
    transition: all 0.2s ease;
}
.add-card-btn:hover svg {
    stroke: #34d399;
    transform: scale(1.1);
}

/* NOUVEAU STYLE: Sélecteur de couleur pour Deck */
.color-swatch {
    width: 2rem;
    height: 2rem;
    border-radius: 50%;
    cursor: pointer;
    border: 3px solid transparent;
    transition: transform 0.2s, border-color 0.2s;
}
.color-swatch.selected {
    border-color: #ffffff;
    transform: scale(1.1);
}
.color-swatch:hover {
    transform: scale(1.1);
}
/* AJOUT: Permet aux sauts de ligne (\n) de fonctionner dans la modale d'alerte */
#alert-modal-text {
    white-space: pre-wrap;
}
